
<div class="component-wrapper">

  <div
    *ngIf="item"
    class="mat-elevation-z4 user">

    <a
      class="home-link"
      mat-button
      matTooltip="See all open cases"
      routerLink="/">
      <mat-icon>home</mat-icon>
    </a>

    <span
      class="username">
      {{item.username}}
    </span>

    <mat-icon
      class="verified"
      matTooltip="User has verified his email address"
      matSuffix
      *ngIf="item.status === 'verified'">
      check
    </mat-icon>

    <h1>{{item.name || item.username}}</h1>

    <div class="summary">

      <table class="summary-table">
        <tr>
          <td matTooltip="This is how many cases the user has created">
            Cases created
          </td>
          <td>
            {{item.cases}}
          </td>
        </tr>
        <tr>
          <td matTooltip="This is how many votes user has received on his or her own cases">
            Votes given
          </td>
          <td>
            {{item.votes}}
          </td>
        </tr>
        <tr>
          <td matTooltip="This is how many votes the user has given">
            Votes
          </td>
          <td>
            {{getTotalVotes()}}
          </td>
        </tr>
        <tr *ngIf="item.phone">
          <td>
            Phone
          </td>
          <td>
            {{item.phone}}
          </td>
        </tr>
        <tr *ngIf="item.email">
          <td colspan="2">
            <a
              [href]="'mailto:' + item.email"
              class="email">
              {{item.email}}
            </a>
          </td>
        </tr>
      </table>

      <div
        class="summary-regions">
        <label>Votes user has given per region</label>
        <canvas
          *ngIf="shouldDisplayRegionChart()"
          baseChart
          chartType="bar"
          [options]="barChartOptions"
          [data]="barChartData"
          [labels]="barChartLabels"
          [colors]="barChartColors">
        </canvas>
      </div>

      <div
        *ngIf="shouldDisplayWinningsChart()"
        class="summary-winnings">
        <label>Winnings and loosings</label>
        <canvas
          baseChart
          chartType="pie"
          [options]="pieChartOptions"
          [data]="pieChartData"
          [labels]="pieChartLabels"
          [colors]="pieChartColors">
        </canvas>
      </div>

    </div>

    <div
      class="regions">
      <ul>
        <li
          *ngFor="let idx of item.regions">
          <a
            class="region-link"
            [routerLink]="'/region/' + idx.name">
            {{idx.name}}
          </a>
        </li>
      </ul>
    </div>

    <ul
      *ngIf="cases !== null"
      class="cases">
      <li
        *ngFor="let idx of cases">
        <a
          class="case-link"
          [ngClass]="idx.voted === 1 ? 'voted' : ''"
          [matTooltip]="idx.voted === 1 ? 'You have already voted for this case' : 'You have not given your vote in this case'"
          [routerLink]="'/case/' + idx.id">
          {{idx.subject}}
        </a>
        <small>
          {{capitalize(idx.region)}} ({{idx.positive + '/' + (idx.votes - idx.positive)}})
        </small>
      </li>
    </ul>

  </div>

</div>
