
<div class="component-wrapper">

  <div
    *ngIf="item"
    class="mat-elevation-z4 case">
    <a
      class="home-link"
      matTooltip="See all open cases"
      mat-button
      routerLink="/">
      <mat-icon>home</mat-icon>
    </a>
    <h1>
      {{item.subject}}
    </h1>
    <div
      class="content"
      [innerHtml]="item.body | marked"></div>
    <qrcode
      class="qr-code"
      [qrdata]="getCaseUrl()"
      [width]="128"
      [errorCorrectionLevel]="'M'"></qrcode>
    <div
      class="qr-code-description">
      Vote for case above
    </div>
    <div
      class="meta-data">
      <div class="item">
        <a
          class="region-link"
          [matTooltip]="'Question was asked in ' + capitalize(item.region)"
          [routerLink]="'/region/' + item.region">
          {{item.region}}
        </a>
      </div>
      <div class="item">
        <a
          class="user-link"
          [matTooltip]="'Case was brought forth to the public by ' + item.user"
          [routerLink]="'/user/' + item.user">
          {{item.user}}
        </a>
      </div>
      <div
        class="item"
        [matTooltip]="'Votes can be cast until ' + (item.deadline | date_format)">
        {{item.deadline | toDate}}
      </div>
      <div
       class="item count"
       [matTooltip]="item.positive + ' aye and ' + item.negative + ' nay'">
        {{item.positive}} / {{item.negative}}
      </div>
    </div>
    <div
      class="action-bar"
      *ngIf="item.opinion === undefined && isLoggedIn()">
      <button
        (click)="yes()"
        class="yes"
        matTooltip="Vote aye to this case"
        mat-stroked-button>
        <mat-icon>thumb_up</mat-icon>
      </button>
      <button
        (click)="no()"
        class="no"
        matTooltip="Vote nay to this case"
        mat-stroked-button>
        <mat-icon>thumb_down</mat-icon>
      </button>
    </div>
    <div
      class="action-bar"
      [ngClass]="getClass()"
      *ngIf="item.opinion !== undefined && isLoggedIn()">
      <mat-icon
        matTooltip="You voted aye for this case"
        *ngIf="item.opinion === true">thumb_up</mat-icon>
      <mat-icon
        matTooltip="You voted nay for this case"
        *ngIf="item.opinion === false">thumb_down</mat-icon>
    </div>
  </div>

</div>
